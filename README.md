# project2-triplesix

## 1.爬虫模块

### 1.1 Aminer
#### 1.1.1 爬取策略
针对Aminer网站，采取基于关键词搜索的爬虫策略。例如，设置检索关键词为“Machine Learning”，网站会返回与关键词相关的一系列作者，我们爬取这些作者的姓名、照片链接、引用数、所属机构和领域信息，同时到每个作者的个人详情页面爬取该作者的所有论文列表，包括论文的题目和共同作者。通过设置不同的关键字，爬取不同的检索返回作者，最后将所有爬取到的数据进行去重操作。
#### 1.1.2 去重操作
在把包装好的数据写入MongoDB时，采用update_one方法，设置upsert=True，以达到不写入重复数据的目的。用法如下：
`collection.update_one(filter,new_values,upsert=True)`

`filter：查询的条件；`
`new_values：适用的修改；`
`upsert：update+insert，存在则更新，不存在则插入。`

### 1.2 Semantic Scholar
#### 1.2.1 爬取策略
由于网站提供了API的URL接口，其组成为 固定字符串 + authorID + 关键词 的形式，所以我们可以选择类似于树的层次遍历的方法，将作者ID充分利用起来。由一个大牛人物出发，首先遍历得到该人物的共同作者ID，再由得到的共同作者ID继续得到其相关作者的ID，最终就可以收集到一个庞大的关系树（实际上是关系网，但是后续有去重步骤）。最后将作者ID和固定字段组合形成作者信息的URL，访问该URL，拿到作者相关信息。
#### 1.2.2 去重及增量化
##### 1）去重
由于层次遍历阶段收集的是相关作者ID，并得到作者ID的列表，所以我们可以使用set的方法，直接对列表去重

`result = set(all_layer_authors_id) # 将list转为set直接去重`

`id_list = list(result) # 将set转回list方便使用`
##### 2）增量化
实现增量爬取的途径一般有以下几种：

**1. 使用数据库建立关键字段建立索引进行去重**。

**2. 根据URL地址进行去重**。适用于URL地址对应的数据不会变的情况，URL地址能够唯一判别一个条数据的情况，URL存在Redis中拿到URL地址，判断URL在Redis的URL的集合中是否存在。若存在，说明URL已经被请求过，不再请求；如果不存在，证明URL地址没有被请求过，那就发送请求，把该URL存入Redis的集合中。

**3. 布隆过滤器**。使用多个加密算法加密URL地址，得到多个值往对应值的位置把结果设置为1，新来一个URL地址，一样通过加密算法生成多个值，如果对应位置的值全为1，说明这个URL地址已经被抓过，如果没有被抓过，就把对应位置的值设置为1。

   可以发现增量爬取实现的利器便是Redis，Redis是一个开源的并且支持多种数据类型的存储系统，在很多项目当中都被用来当作数据持久化存储的选择。在程序中建立Redis数据库链接，通过Python的Redis库中的sadd函数进行URL的存储，使用sadd函数进行插入时，插入的数据也是键值对的形式，并且sadd函数继承了Redis利用键值自动去重的优势，如果插入的数据已经存在在数据库当中，则会返回0，如果是新数据，则将返回1。所以我们利用sadd函数向Redis中插入URL，如果返回值为1，则进行数据爬取，将对应的URL的数据爬取下来，以此来实现数据的增量爬取。实现数据爬取的自动化，则需要结合服务器，每天定时爬取。

### 1.3 MongoDB数据库

MongoDB是一个基于分布式文件存储的数据库。由C++语言编写。旨在为WEB应用提供可扩展的高性能数据存储解决方案。MongoDB是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。它支持的数据结构非常松散，是类似json的bson格式，因此可以存储比较复杂的数据类型。Mongo最大的特点是它支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。
```
# 设置MongoDB账户和数据集
myclient = pymongo.MongoClient("mongodb://localhost:27017/")

mydb = myclient["Sem_sch_authors"]

mycoll = mydb["Authors_data"]
```
```
# 将数据存入MongoDB

Insert_mongoDB = mycoll.insert_one(dict)

print("作者ID" + str(authors[i]) + "信息已更新！")
```

## 2.检索模块


## 3.展示模块
